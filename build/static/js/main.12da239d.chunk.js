(this["webpackJsonpvexere-ui-admin"]=this["webpackJsonpvexere-ui-admin"]||[]).push([[0],{51:function(e,t,n){e.exports=n(92)},56:function(e,t,n){},57:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(24),o=n.n(c),l=(n(56),n(2)),i=n(3),s=n(5),u=n(4),m=(n(57),n(8)),d=n(18),p=(n(58),n(36),n(59),n(60),n(61),n(62),n(63),n(16)),h=n(7),E=n.n(h),b=n(12),f=n.n(b),v=n(6),g=n(46),y=n.n(g).a.create({baseURL:"http://localhost:5000/api"}),O=function(e){return{getItems:function(){return y.get(e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},createItem:function(t){return y.post(e,t).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},updateItem:function(t){return y.put(e,t).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))},deleteItem:function(){return y.delete(e).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}}},S=n(26),_=n.n(S),j=function(e){e?y.defaults.headers.common.token=e:delete y.defaults.headers.common.token},T=function(e){return{type:"SET_CURRENT_USER",payload:e}},C=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n={email:t.email,password:t.password};a.props.login(n).then((function(){a.props.history.push("/stations")})).catch((function(e){return alert("\u0110\u0103ng nh\u1eadp th\u1ea5t b\u1ea1i")}))},a.state={email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e={marginTop:"20px",marginBottom:"20px"};return r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:0,paddingTop:"100px"}}," \u0110\u0102NG NH\u1eacP"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"Email"},r.a.createElement(h.Input,{value:this.state.email,name:"email",onChange:this.onChange}))),r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"Password"},r.a.createElement(h.Input,{value:this.state.password,name:"password",onChange:this.onChange,type:"password"}))),r.a.createElement(f.a,{raised:!0,type:"submit"},"\u0110\u0103ng nh\u1eadp")))}}]),n}(a.Component),I=Object(v.b)(null,{login:function(e){return function(t){return y.post("/users/login",e).then((function(e){var n=e.data.token,a=_()(n);if("client"===a.userType)return Promise.reject({message:"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp"});localStorage.setItem("token",n),j(n),t(T(a))})).catch((function(e){return Promise.reject(e)}))}}})(C),N=n(22),x=n.n(N),D=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:0,paddingTop:"100px"}},"QU\u1ea2N L\xdd CHUNG"),r.a.createElement(x.a,null,r.a.createElement(N.ListItem,null,r.a.createElement(m.b,{to:"/stations"},"Qu\u1ea3n l\xfd b\u1ebfn xe")),r.a.createElement(N.ListItem,null,r.a.createElement(m.b,{to:"/trips"},"Qu\u1ea3n l\xfd chuy\u1ebfn \u0111i")),r.a.createElement(N.ListItem,null,r.a.createElement(m.b,{to:"/tickets"},"Qu\u1ea3n l\xfd v\xe9")),r.a.createElement(N.ListItem,null,r.a.createElement(m.b,{to:"/users"},"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng"))))}}]),n}(a.Component),k=n(27),w=n(19),A=n.n(w),P=n(48),U=n.n(P),B=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t={color:"white",textDecoration:"none"},n=Object(k.a)({},t,{marginRight:"15px"});return r.a.createElement("div",null,r.a.createElement(A.a,null,r.a.createElement(w.TopAppBarRow,null,r.a.createElement(w.TopAppBarSection,{align:"start"},r.a.createElement(w.TopAppBarIcon,{navIcon:!0,tabIndex:0},r.a.createElement(U.a,{hasRipple:!0,icon:"menu",onClick:function(){return console.log("click")}})),r.a.createElement(w.TopAppBarTitle,null,r.a.createElement(m.b,{to:"/",style:t},"Vexere"))),r.a.createElement(w.TopAppBarSection,{align:"end",role:"toolbar"},r.a.createElement(m.b,{to:"/stations",style:n},"B\u1ebfn xe"),r.a.createElement(m.b,{to:"/trips",style:n},"Chuy\u1ebfn \u0111i"),r.a.createElement(m.b,{to:"/tickets",style:n},"V\xe9"),r.a.createElement(m.b,{to:"/clients",style:n},"Kh\xe1ch h\xe0ng"),r.a.createElement(m.b,{to:"/profile",style:n},"H\u1ed3 s\u01a1"),r.a.createElement(m.b,{to:"/",onClick:function(){return e.props.logout()}},"\u0110\u0103ng xu\u1ea5t")))))}}]),n}(a.Component),L=Object(v.b)(null,{logout:function(){return function(e){localStorage.removeItem("token"),j(),e(T({}))}}})(B),R=n(94),X=n(20),Q=n.n(X),H=function(e){return function(t){return O("/stations/".concat(e)).deleteItem().then((function(){t({type:"DELETE_STATION",payload:e})})).catch((function(e){return Promise.reject(e)}))}},G=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Q.a,{open:this.props.isDelete,onClose:this.props.cancelDelete},r.a.createElement(X.DialogTitle,null,"X\xf3a station"),r.a.createElement(X.DialogContent,null,"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a?"),r.a.createElement(X.DialogFooter,null,r.a.createElement(X.DialogButton,{onClick:function(){return e.props.cancelDelete()}},"Kh\xf4ng"),r.a.createElement(X.DialogButton,{onClick:function(){return e.props.deleteStation(e.props.stationId)}},"C\xf3"))))}}]),n}(a.Component),M=Object(v.b)(null,{deleteStation:H})(G),F=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).cancelDelete=function(){a.setState({isDelete:!1})},a.state={isDelete:!1},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,a=t.station;return r.a.createElement("tr",{className:"mdc-data-table__row"},r.a.createElement("td",{className:"mdc-data-table__cell"},n+1),r.a.createElement("td",{className:"mdc-data-table__cell mdc-data-table__cell--numeric"},a.name),r.a.createElement("td",{className:"mdc-data-table__cell mdc-data-table__cell--numeric"},a.address),r.a.createElement("td",{className:"mdc-data-table__cell"},a.province),r.a.createElement("td",{className:"mdc-data-table__cell"},r.a.createElement(f.a,{raised:!0,onClick:function(){e.props.history.push("/stations/update-station/".concat(a._id)),e.props.setSelectedStation(a)}},"S\u1eeda"),r.a.createElement(f.a,{onClick:function(){return e.setState({isDelete:!0})},outlined:!0,style:{marginLeft:"10px"}},"X\xf3a")),r.a.createElement(M,{isDelete:this.state.isDelete,cancelDelete:this.cancelDelete,stationId:a._id}))}}]),n}(a.Component),V=Object(d.g)(Object(v.b)(null,{deleteStation:H,setSelectedStation:function(e){return function(t){t({type:"SET_SELECTED_STATION",payload:e})}}})(F)),q=function(){var e=localStorage.getItem("token");if(!e)return null;var t=_()(e);return t.exp>Date.now()/1e3?t:null},J=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).renderStations=function(){return e.props.stations.map((function(e,t){return r.a.createElement(V,{key:t,station:e,index:t})}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.getStations();new R.a(document.querySelector(".mdc-data-table"))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:0,paddingTop:"100px"}},"QU\u1ea2N L\xdd B\u1ebeN XE"),r.a.createElement("div",null,r.a.createElement(f.a,{raised:!0,onClick:function(){return e.props.history.push("/stations/create-station")}},"Th\xeam m\u1edbi b\u1ebfn xe")),r.a.createElement("div",{className:"mdc-data-table"},r.a.createElement("table",{className:"mdc-data-table__table","aria-label":"Dessert calories"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"mdc-data-table__header-row"},r.a.createElement("th",{className:"mdc-data-table__header-cell",role:"columnheader",scope:"col"},"STT"),r.a.createElement("th",{className:"mdc-data-table__header-cell mdc-data-table__header-cell--numeric",role:"columnheader",scope:"col"},"T\xean b\u1ebfn xe"),r.a.createElement("th",{className:"mdc-data-table__header-cell mdc-data-table__header-cell--numeric",role:"columnheader",scope:"col"},"\u0110\u1ecba ch\u1ec9"),r.a.createElement("th",{className:"mdc-data-table__header-cell mdc-data-table__header-cell--numeric",role:"columnheader",scope:"col"},"T\u1ec9nh (th\xe0nh ph\u1ed1)"),r.a.createElement("th",{className:"mdc-data-table__header-cell",role:"columnheader",scope:"col"},"Thao t\xe1c"))),r.a.createElement("tbody",{className:"mdc-data-table__content"},this.renderStations()))))}}]),n}(a.Component),K=Object(v.b)((function(e){return{stations:e.stations}}),{getStations:function(){return function(e){return O("/stations").getItems().then((function(t){e({type:"GET_STATIONS",payload:t})}))}}})(function(e){var t=function(t){Object(s.a)(a,t);var n=Object(u.a)(a);function a(e){var t;return Object(l.a)(this,a),(t=n.call(this,e)).state={auth:{}},t}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(e,this.props)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return q()||(e.setCurrentUser({}),e.history.push("/")),e.auth.isAuthenticated!==t.auth.isAuthenticated?(e.auth.isAuthenticated||e.history.push("/"),{auth:e.auth}):{}}}]),a}(r.a.Component);return Object(v.b)((function(e){return{auth:e.auth}}),(function(e){return{setCurrentUser:function(t){e(T(t))}}}))(t)}(J)),W=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n={name:t.name,address:t.address,province:t.province};a.props.createStation(n).then((function(){a.props.history.push("/stations")}))},a.state={name:"",address:"",province:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e={marginTop:"20px",marginBottom:"20px"};return r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:0,paddingTop:"100px"}},"TH\xcaM M\u1edaI B\u1ebeN XE"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"T\xean b\u1ebfn xe"},r.a.createElement(h.Input,{value:this.state.name,name:"name",onChange:this.onChange}))),r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"\u0110\u1ecba ch\u1ec9"},r.a.createElement(h.Input,{value:this.state.address,name:"address",onChange:this.onChange}))),r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"T\u1ec9nh, th\xe0nh ph\u1ed1"},r.a.createElement(h.Input,{value:this.state.province,name:"province",onChange:this.onChange}))),r.a.createElement(f.a,{raised:!0,type:"submit"},"Th\xeam")))}}]),n}(a.Component),Y=Object(v.b)(null,{createStation:function(e){return function(t){return O("/stations").createItem(e).then((function(e){return t({type:"CREATE_STATION",payload:e}),Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}}})(W),$=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault();var t=a.state,n={_id:t._id,name:t.name,address:t.address,province:t.province};console.log("UpdateStation -> onSubmit -> station",n),a.props.updateStation(n).then((function(){a.props.history.push("/stations")}))},a.state={_id:"",name:"",address:"",province:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e={marginTop:"20px",marginBottom:"20px"};return r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:0,paddingTop:"100px"}},"C\u1eacP NH\u1eacT B\u1ebeN XE"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"T\xean b\u1ebfn xe"},r.a.createElement(h.Input,{value:this.state.name,name:"name",onChange:this.onChange}))),r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"\u0110\u1ecba ch\u1ec9"},r.a.createElement(h.Input,{value:this.state.address,name:"address",onChange:this.onChange}))),r.a.createElement("div",{style:e},r.a.createElement(E.a,{label:"T\u1ec9nh, th\xe0nh ph\u1ed1"},r.a.createElement(h.Input,{value:this.state.province,name:"province",onChange:this.onChange}))),r.a.createElement(f.a,{raised:!0,type:"submit"},"S\u1eeda")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(!t.name&&!t.address&&!t.province)return{_id:e.selectedStation&&e.selectedStation._id,name:e.selectedStation&&e.selectedStation.name,address:e.selectedStation&&e.selectedStation.address,province:e.selectedStation&&e.selectedStation.province}}}]),n}(a.Component),z=Object(v.b)((function(e){return{selectedStation:e.layout.selectedStation}}),{updateStation:function(e){return function(t){return O("/stations/".concat(e._id)).updateItem(e).then((function(){t({type:"UPDATE_STATION",payload:e})})).catch((function(e){return Promise.reject(e)}))}}})($),Z=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",{style:{margin:0,paddingTop:"100px"}}," QU\u1ea2N L\xdd CHUY\u1ebeN \u0110I"))}}]),n}(a.Component),ee=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"PAGE NOT FOUND"))},te=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=q();e&&this.props.setCurrentUser(e)}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,e&&r.a.createElement(L,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,render:function(t){return e?r.a.createElement(d.a,{to:"/manager"}):r.a.createElement(I,t)}}),r.a.createElement(d.b,{path:"/manager",exact:!0,component:D}),r.a.createElement(d.b,{path:"/stations",exact:!0,component:K}),r.a.createElement(d.b,{path:"/stations/create-station",exact:!0,component:Y}),r.a.createElement(d.b,{path:"/stations/update-station/:stationId",exact:!0,component:z}),r.a.createElement(d.b,{path:"/trips",exact:!0,component:Z}),r.a.createElement(d.b,{path:"/",component:ee}))))}}]),n}(r.a.Component),ne=Object(v.b)((function(e){return{auth:e.auth}}),(function(e){return{setCurrentUser:function(t){e(T(t))}}}))(te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=n(17),re=n(49),ce=n(34),oe=[],le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_STATIONS":return t.payload;case"CREATE_STATION":return[].concat(Object(ce.a)(e),[t.payload]);case"UPDATE_STATION":var n=e.findIndex((function(e){return e._id===t.payload._id}));return e[n]=t.payload,Object(ce.a)(e);case"DELETE_STATION":return e.filter((function(e){return e._id!==t.payload}));default:return e}},ie={selectedStation:{},selectedTrip:{},isDelete:!1,isUpdate:!1},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_STATION":return Object(k.a)({},e,{selectedStation:t.payload});default:return e}},ue=n(50),me=n.n(ue),de={isAuthenticated:!1,decoded:{}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return{isAuthenticated:!me.a.isEmpty(t.payload),decoded:t.payload};default:return e}},he=Object(ae.c)({stations:le,layout:se,auth:pe}),Ee=[re.a],be=Object(ae.e)(he,{},Object(ae.d)(ae.a.apply(void 0,Ee),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v.a,{store:be},r.a.createElement(ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.12da239d.chunk.js.map